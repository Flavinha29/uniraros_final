{% extends "base.html" %}
{% load static %}

{% block title %}{{ object.titulo }} - UniRaros{% endblock %}

{% block content %}
<div class="container my-5">
    <!-- Botão Voltar -->
    <div class="mb-4">
        <a href="{% url 'lista_conteudos' %}" class="btn btn-sm" 
           style="background-color: #f8f9fa; color: var(--roxo); border: 1px solid rgba(0,0,0,0.1);">
            <i class="bi bi-arrow-left me-2"></i>Voltar para Conteúdos
        </a>
    </div>

    <!-- Card Principal -->
    <div class="card border-0 shadow-sm" style="border: 1px solid rgba(0,0,0,0.08);">
        <div class="card-header py-4" style="background-color: #f8f9fa; border-bottom: 1px solid rgba(0,0,0,0.08);">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="h4 mb-2" style="color: var(--roxo);">{{ object.titulo }}</h1>
                    <span class="badge px-3 py-2" 
                          style="background-color: rgba(91, 44, 111, 0.1); color: var(--roxo);">
                        {{ object.categoria|default:"Conteúdo Educativo" }}
                    </span>
                </div>
                {% if object.arquivo_pdf %}
                <a href="{{ object.arquivo_pdf.url }}" target="_blank" class="btn btn-sm" 
                   style="background-color: var(--roxo); color: white;">
                    <i class="bi bi-download me-2"></i>Baixar PDF
                </a>
                {% endif %}
            </div>
        </div>
        
        <div class="card-body p-4">
            <!-- Imagem -->
            {% if object.imagem %}
            <div class="text-center mb-4">
                <img src="{{ object.imagem.url }}" class="img-fluid rounded" alt="{{ object.titulo }}" 
                     style="max-height: 300px; object-fit: cover; border: 1px solid rgba(0,0,0,0.08);">
            </div>
            {% endif %}
            
            <!-- Resumo -->
            <div class="mb-4">
                <h5 class="mb-3" style="color: var(--roxo);">
                    <i class="bi bi-card-text me-2"></i>Resumo
                </h5>
                <div class="p-3 rounded" style="background-color: #f8f9fa; border: 1px solid rgba(0,0,0,0.05);">
                    <p class="mb-0">{{ object.descricao|linebreaks }}</p>
                </div>
            </div>
            
            <!-- Seções Dinâmicas -->
            <div class="row">
                {% if object.sintomas %}
                <div class="col-md-6 mb-4">
                    <div class="p-4 rounded h-100" style="background-color: #f8f9fa; border: 1px solid rgba(0,0,0,0.05);">
                        <h5 class="mb-3" style="color: var(--roxo);">
                            <i class="bi bi-clipboard-pulse me-2"></i>Sintomas
                        </h5>
                        <p class="mb-0">{{ object.sintomas|linebreaks }}</p>
                    </div>
                </div>
                {% endif %}
                
                {% if object.diagnostico %}
                <div class="col-md-6 mb-4">
                    <div class="p-4 rounded h-100" style="background-color: #f8f9fa; border: 1px solid rgba(0,0,0,0.05);">
                        <h5 class="mb-3" style="color: var(--roxo);">
                            <i class="bi bi-search-heart me-2"></i>Diagnóstico
                        </h5>
                        <p class="mb-0">{{ object.diagnostico|linebreaks }}</p>
                    </div>
                </div>
                {% endif %}
                
                {% if object.tratamento %}
                <div class="col-md-12 mb-4">
                    <div class="p-4 rounded" style="background-color: #f8f9fa; border: 1px solid rgba(0,0,0,0.05);">
                        <h5 class="mb-3" style="color: var(--roxo);">
                            <i class="bi bi-heart-pulse me-2"></i>Tratamento
                        </h5>
                        <p class="mb-0">{{ object.tratamento|linebreaks }}</p>
                    </div>
                </div>
                {% endif %}
            </div>
            
            <!-- Recursos Adicionais -->
            {% if object.link_referencia or object.arquivo_pdf %}
            <div class="mt-5">
                <h5 class="mb-3" style="color: var(--roxo);">
                    <i class="bi bi-link-45deg me-2"></i>Recursos Adicionais
                </h5>
                <div class="d-flex gap-3">
                    {% if object.arquivo_pdf %}
                    <a href="{{ object.arquivo_pdf.url }}" target="_blank" class="btn" 
                       style="background-color: var(--roxo); color: white;">
                        <i class="bi bi-file-earmark-pdf me-2"></i>Baixar Material
                    </a>
                    {% endif %}
                    
                    {% if object.link_referencia %}
                    <a href="{{ object.link_referencia }}" target="_blank" class="btn" 
                       style="background-color: #f8f9fa; color: var(--roxo); border: 1px solid rgba(0,0,0,0.1);">
                        <i class="bi bi-box-arrow-up-right me-2"></i>Fonte Oficial
                    </a>
                    {% endif %}
                </div>
            </div>
            {% endif %}
            
            <!-- Ações Finais -->
            <div class="mt-5 pt-4 border-top">
                <div class="d-flex justify-content-between">
                    <a href="{% url 'lista_conteudos' %}" class="btn" 
                       style="background-color: #f8f9fa; color: var(--roxo); border: 1px solid rgba(0,0,0,0.1);">
                        <i class="bi bi-arrow-left me-2"></i>Ver Todos os Conteúdos
                    </a>
                    
                    {% if object.link_referencia %}
                    <a href="{{ object.link_referencia }}" target="_blank" class="btn" 
                       style="background-color: var(--roxo); color: white;">
                        <i class="bi bi-share me-2"></i>Compartilhar
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .card {
        border-radius: 8px;
    }
    
    .btn {
        transition: all 0.3s ease;
        border-radius: 6px;
    }
    
    .btn:hover:not([style*="background-color: var(--roxo)"]) {
        background-color: var(--roxo) !important;
        color: white !important;
        border-color: var(--roxo) !important;
    }
</style>
{% endblock %}